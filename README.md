# Spring Project

Проект демонстрирует различные аспекты работы Spring Framework через отдельные ветки репозитория.
В проекте используется Java 21, SpringBoot 3, Maven.

## Структура веток

### Ветка `exercise1` - Spring Core

**Реализованные возможности:**

- Работа с разными скоупами бинов:
    - Создание Singleton и Prototype бинов
- Работа с механизмом `BeanFactoryPostProcessor`:
    - Предупреждения для `@CacheResult` на prototype-бинах
- Работа с жизненным циклом бинов:
    - `@PostConstruct` инициализация тестовых данных
    - `@PreDestroy` очистка ресурсов
- Механизм `BeanPostProcessor`:
    - Кастомный `CacheResultBeanPostProcessor`
    - Автоматическое создание прокси для методов с `@CacheResult`
- Реализация кэширования:
    - Кастомный интерцептор `CacheResultMethodInterceptor`
    - Двухуровневый кэш (метод + аргументы)

### Ветка `exercise2` - Spring (Core, AOP)

**Реализованные возможности:**

- Работа с аспектами.
- Логирование работы методов:
    - Старт/конец выполнения
    - Обработка исключений
- Валидация запросов:
    - Кастомная аннотация `@CheckRequest`
- Улучшенное кэширование:
    - Кастомная аннотация `@CacheResult`
    - Управление кэшем через AOP

### Ветка `exercise3` - Spring (Core, AOP, Web) с применением REST API и in-memory хранилища

**Реализованные возможности:**

- Данная система позволяет:
    - Получать информацию о существующих счетах
    - Создавать новые счета
    - Обновлять данные счетов
    - Удалять счета
- Приложение следует стандартной трехуровневой архитектуре:
    - Контроллеры (`BankBookController`) - обработка HTTP запросов
    - Сервисы (`BankBookServiceImpl`) - бизнес-логика
    - In-memory хранилище (на основе `ConcurrentHashMap`)
- Также было использованы технологии:
    - Обработка входящих запросов через `@RestController`
    - Глобальный обработчик исключений через `@RestControllerAdvice` и `@ExceptionHandler`
    - Кастомные исключения для бизнес-ошибок

### Ветка `exercise4` - Spring (Core, AOP, Web, Data) с применением REST API и PostgreSQL

**Реализованные возможности:**

- Данная система позволяет:
    - Получать информацию о существующих счетах
    - Создавать новые счета (с валидацией данных, с проверкой на дубликаты счетов)
    - Обновлять данные счетов (с защитой от изменения номера счета)
    - Удалять счета
- Приложение следует стандартной трехуровневой архитектуре:
    - Контроллеры (`BankBookController`) - обработка HTTP запросов, валидация входящих данных
    - Сервисы (`BankBookServiceImpl`) - бизнес-логика, взаимодействие с репозиториями, обработка ошибок
    - Хранилище данных PostgreSQL - с использованием Spring Data JPA (`BankBookRepository`, `CurrencyRepository`) и
      Liquibase для управления миграциями
- Также было использованы технологии:
    - MapStruct - маппинг между DTO и Entity
    - Обработка входящих запросов через `@RestController`
    - Глобальный обработчик исключений через `@RestControllerAdvice` и `@ExceptionHandler`
    - Docker Compose - развертывание PostgreSQL
    - Кастомная валидация через `@Currency`, которая проверяет существование валюты в БД

**Перед запуском программы необходимо запустить локально Docker и в терминале написать команду docker-compose up**

### Ветка `exercise5` - Spring (Core, AOP, Web, Data) с применением REST API и PostgreSQL (Добавлены операции по управлению пользователями, банковскими счетами и транзакциями)

**Реализованные возможности:**

- Проект представляет собой:
    - RESTful API для банковской системы, реализующей основные операции по управлению пользователями, банковскими счетами и транзакциями.
- Управление схемой БД:
    - Используется Liquibase для версионного контроля миграций.
    - Все таблицы связаны через внешние ключи
- Обработка ошибок:
    - Глобальный обработчик исключений (GlobalExceptionHandler)
    - Стандартизированный формат ошибок (ErrorDto)
    - Подробные сообщения об ошибках с кодами
- Валидация:
    - Проверка входных данных на уровне контроллера
    - Кастомные проверки бизнес-логики
- Транзакции:
    - Переводы выполняются в рамках транзакций
    - Переводы между счетами
    - Проверка валют и достаточности средств
    - Логирование всех операций

**Перед запуском программы необходимо запустить локально Docker и в терминале написать команду docker-compose up**