# Spring Core, AOP, REST API

Проект демонстрирует различные аспекты работы Spring Framework через отдельные ветки репозитория.
В проекте используется Java 21, SpringBoot 3, Maven.

## Структура веток

### Ветка `exercise1` - Ядро Spring

**Реализованные возможности:**

- Работа с разными скоупами бинов:
    - Создание Singleton и Prototype бинов
- Работа с механизмом `BeanFactoryPostProcessor`:
    - Предупреждения для `@CacheResult` на prototype-бинах
- Работа с жизненным циклом бинов:
    - `@PostConstruct` инициализация тестовых данных
    - `@PreDestroy` очистка ресурсов
- Механизм `BeanPostProcessor`:
    - Кастомный `CacheResultBeanPostProcessor`
    - Автоматическое создание прокси для методов с `@CacheResult`
- Реализация кэширования:
    - Кастомный интерцептор `CacheResultMethodInterceptor`
    - Двухуровневый кэш (метод + аргументы)

### Ветка `exercise2` - AOP Spring

**Реализованные возможности:**

- Работа с аспектами.
- Логирование работы методов:
    - Старт/конец выполнения
    - Обработка исключений
- Валидация запросов:
    - Кастомная аннотация `@CheckRequest`
- Улучшенное кэширование:
    - Кастомная аннотация `@CacheResult`
    - Управление кэшем через AOP

### Ветка `exercise3` - REST API с применением in-memory хранилища

**Реализованные возможности:**

- Данная система позволяет:
    - Получать информацию о существующих счетах
    - Создавать новые счета
    - Обновлять данные счетов
    - Удалять счета
- Приложение следует стандартной трехуровневой архитектуре:
    - Контроллеры (`BankBookController`) - обработка HTTP запросов
    - Сервисы (`BankBookServiceImpl`) - бизнес-логика
    - In-memory хранилище (на основе `ConcurrentHashMap`)
- Также было использованы технологии:
    - Обработка входящих запросов через `@RestController`
    - Глобальный обработчик исключений через `@RestControllerAdvice` и `@ExceptionHandler`
    - Кастомные исключения для бизнес-ошибок

### Ветка `exercise4` - REST API с применением СУБД PostgreSQL

**Реализованные возможности:**

- Данная система позволяет:
    - Получать информацию о существующих счетах
    - Создавать новые счета (с валидацией данных, с проверкой на дубликаты счетов)
    - Обновлять данные счетов (с защитой от изменения номера счета)
    - Удалять счета
- Приложение следует стандартной трехуровневой архитектуре:
    - Контроллеры (`BankBookController`) - обработка HTTP запросов, валидация входящих данных
    - Сервисы (`BankBookServiceImpl`) - бизнес-логика, взаимодействие с репозиториями, обработка ошибок
    - Хранилище данных PostgreSQL - с использованием Spring Data JPA (`BankBookRepository`, `CurrencyRepository`) и
      Liquibase для управления миграциями
- Также было использованы технологии:
    - MapStruct - маппинг между DTO и Entity
    - Обработка входящих запросов через `@RestController`
    - Глобальный обработчик исключений через `@RestControllerAdvice` и `@ExceptionHandler`
    - Docker Compose - развертывание PostgreSQL
    - Кастомная валидация через `@Currency`, которая проверяет существование валюты в БД

**Перед запуском программы необходимо запустить локально Docker и в терминале написать команду docker-compose up**