# Spring Project

Проект демонстрирует различные аспекты работы Spring Framework через отдельные ветки репозитория.
В проекте используется Java 21, SpringBoot 3.4.5, Maven и другие технологии.

## Структура веток

### Ветка `exercise1` - Spring Core

**Реализованные возможности:**

- Работа с разными скоупами бинов:
    - Создание Singleton и Prototype бинов
- Работа с механизмом `BeanFactoryPostProcessor`:
    - Предупреждения для `@CacheResult` на prototype-бинах
- Работа с жизненным циклом бинов:
    - `@PostConstruct` инициализация тестовых данных
    - `@PreDestroy` очистка ресурсов
- Механизм `BeanPostProcessor`:
    - Кастомный `CacheResultBeanPostProcessor`
    - Автоматическое создание прокси для методов с `@CacheResult`
- Реализация кэширования:
    - Кастомный интерцептор `CacheResultMethodInterceptor`
    - Двухуровневый кэш (метод + аргументы)

### Ветка `exercise2` - Spring (Core, AOP)

**Реализованные возможности:**

- Работа с аспектами.
- Логирование работы методов:
    - Старт/конец выполнения
    - Обработка исключений
- Валидация запросов:
    - Кастомная аннотация `@CheckRequest`
- Улучшенное кэширование:
    - Кастомная аннотация `@CacheResult`
    - Управление кэшем через AOP

### Ветка `exercise3` - Spring (Core, AOP, MVC) с применением in-memory хранилища

**Реализованные возможности:**

- Данная система позволяет:
    - Получать информацию о существующих счетах
    - Создавать новые счета
    - Обновлять данные счетов
    - Удалять счета
- Приложение следует стандартной трехуровневой архитектуре:
    - Контроллеры (`BankBookController`) - обработка HTTP запросов
    - Сервисы (`BankBookServiceImpl`) - бизнес-логика
    - In-memory хранилище (на основе `ConcurrentHashMap`)
- Также было использовано:
    - Обработка входящих запросов через `@RestController`
    - Глобальный обработчик исключений через `@RestControllerAdvice` и `@ExceptionHandler`
    - Кастомные исключения для бизнес-ошибок

### Ветка `exercise4` - Spring (Core, AOP, MVC, Data) с применением PostgreSQL

**Реализованные возможности:**

- Проект представляет собой:
  - RESTful API для банковской системы, реализующей основные операции по управлению пользователями, банковскими счетами и транзакциями.
- Приложение следует стандартной трехуровневой архитектуре:
  - Контроллеры - обработка HTTP запросов, валидация входящих данных
  - Сервисы - бизнес-логика, взаимодействие с репозиториями, обработка ошибок
  - Хранилище данных PostgreSQL - с использованием Spring Data JPA и Liquibase для управления миграциями
- Валидация:
  - Валидация и кастомные проверки бизнес-логики (проверка на дубликаты счетов, защита от изменения номера счета, проверка валют и достаточности средств и т.д.)
  - Кастомная валидация через `@Currency`, которая проверяет существование валюты в БД
- Обработка ошибок:
  - Глобальный обработчик исключений через `@RestControllerAdvice` и `@ExceptionHandler`
  - Стандартизированный формат ошибок (ErrorDto)
  - Подробные сообщения об ошибках с кодами
- Также было использовано:
  - Маппинг между DTO и Entity через MapStruct
  - Обработка входящих запросов через `@RestController`
  - Развертывание PostgreSQL в Docker
  - Все таблицы связаны через внешние ключи
  - Логирование всех операций

**Перед запуском программы необходимо запустить локально Docker и в терминале выполнить команду docker-compose up**