# Spring Project

Проект демонстрирует различные аспекты работы Spring Framework через отдельные ветки репозитория.
В проекте используется Java 21, SpringBoot 3.x, Maven и другие технологии.

## Структура веток

### Ветка `exercise1` - Spring Bean Lifecycle & Caching Demo
- Проект демонстрирует работу жизненного цикла бинов в Spring, механизмы кэширования через прокси и кастомную обработку
  бинов.

**Реализованные возможности:**
- Полный жизненный цикл бинов Spring (от создания до уничтожения)
- Кастомная аннотация `@CacheResult` для кэширования результатов методов
- Реализация `BeanPostProcessor` и `BeanFactoryPostProcessor`
- Работа с `@PostConstruct` и `@PreDestroy`
- Сравнение singleton и prototype бинов
- Динамическое проксирование методов. Кастомный интерцептор `CacheResultMethodInterceptor`
- Двухуровневое потокобезопасное кэширование
- После запуска программы в логах будет отображен полный цикл работы бинов

**Технологический стек:**
Java 21, Spring Boot 3.x, Maven, Lombok

### Ветка `exercise2` - Spring (Core, AOP)

**Реализованные возможности:**

- Работа с аспектами.
- Логирование работы методов:
    - Старт/конец выполнения
    - Обработка исключений
- Валидация запросов:
    - Кастомная аннотация `@CheckRequest`
- Улучшенное кэширование:
    - Кастомная аннотация `@CacheResult`
    - Управление кэшем через AOP

### Ветка `exercise3` - Spring (Core, AOP, MVC) с применением in-memory хранилища

**Реализованные возможности:**

- Данная система позволяет:
    - Получать информацию о существующих счетах
    - Создавать новые счета
    - Обновлять данные счетов
    - Удалять счета
- Приложение следует стандартной трехуровневой архитектуре:
    - Контроллеры (`BankBookController`) - обработка HTTP запросов
    - Сервисы (`BankBookServiceImpl`) - бизнес-логика
    - In-memory хранилище (на основе `ConcurrentHashMap`)
- Также было использовано:
    - Обработка входящих запросов через `@RestController`
    - Глобальный обработчик исключений через `@RestControllerAdvice` и `@ExceptionHandler`
    - Кастомные исключения для бизнес-ошибок

### Ветка `exercise4` - Spring (Core, AOP, MVC, Data) с применением PostgreSQL

**Реализованные возможности:**

- Проект представляет собой:
  - RESTful API для банковской системы, реализующей основные операции по управлению пользователями, банковскими счетами и транзакциями.
- Приложение следует стандартной трехуровневой архитектуре:
  - Контроллеры - обработка HTTP запросов, валидация входящих данных
  - Сервисы - бизнес-логика, взаимодействие с репозиториями, обработка ошибок
  - Хранилище данных PostgreSQL - с использованием Spring Data JPA и Liquibase для управления миграциями
- Валидация:
  - Валидация и кастомные проверки бизнес-логики (проверка на дубликаты счетов, защита от изменения номера счета, проверка валют и достаточности средств и т.д.)
  - Кастомная валидация через `@Currency`, которая проверяет существование валюты в БД
- Обработка ошибок:
  - Глобальный обработчик исключений через `@RestControllerAdvice` и `@ExceptionHandler`
  - Стандартизированный формат ошибок (ErrorDto)
  - Подробные сообщения об ошибках с кодами
- Также было использовано:
  - Маппинг между DTO и Entity через MapStruct
  - Обработка входящих запросов через `@RestController`
  - Развертывание PostgreSQL в Docker
  - Все таблицы связаны через внешние ключи
  - Логирование всех операций

**Перед запуском программы необходимо запустить локально Docker и в терминале выполнить команду docker-compose up**